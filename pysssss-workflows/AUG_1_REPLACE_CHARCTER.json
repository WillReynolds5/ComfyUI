{"last_node_id": 113, "last_link_id": 163, "nodes": [{"id": 47, "type": "PreviewImage", "pos": [2198.319597841513, 1477.3547591892057], "size": {"0": 210, "1": 246}, "flags": {}, "order": 47, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 60}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 46, "type": "ControlNetApply", "pos": [2182.319597841513, 1116.3547591892057], "size": {"0": 317.4000244140625, "1": 98}, "flags": {}, "order": 46, "mode": 0, "inputs": [{"name": "conditioning", "type": "CONDITIONING", "link": 57, "slot_index": 0}, {"name": "control_net", "type": "CONTROL_NET", "link": 58}, {"name": "image", "type": "IMAGE", "link": 59, "slot_index": 2}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [80], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetApply"}, "widgets_values": [0.85]}, {"id": 21, "type": "PreviewImage", "pos": [709.1821475895688, 1475.4272342885738], "size": {"0": 210, "1": 246}, "flags": {}, "order": 31, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 24}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 13, "type": "GroundingDinoModelLoader (segment anything)", "pos": [654.1821475895688, 1116.4272342885738], "size": {"0": 361.20001220703125, "1": 58}, "flags": {}, "order": 0, "mode": 0, "outputs": [{"name": "GROUNDING_DINO_MODEL", "type": "GROUNDING_DINO_MODEL", "links": [11], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "GroundingDinoModelLoader (segment anything)"}, "widgets_values": ["GroundingDINO_SwinB (938MB)"]}, {"id": 12, "type": "SAMModelLoader (segment anything)", "pos": [667.1821475895688, 1005.4272342885738], "size": {"0": 315, "1": 58}, "flags": {}, "order": 1, "mode": 0, "outputs": [{"name": "SAM_MODEL", "type": "SAM_MODEL", "links": [10], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "SAMModelLoader (segment anything)"}, "widgets_values": ["sam_vit_h (2.56GB)"]}, {"id": 52, "type": "PreviewImage", "pos": [1183.2661676262123, 1463.6565802315608], "size": {"0": 210, "1": 246}, "flags": {}, "order": 44, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 66}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 23, "type": "ControlNetLoader", "pos": [1668.7387444900626, 1005.3270329659492], "size": {"0": 315, "1": 58}, "flags": {}, "order": 2, "mode": 0, "outputs": [{"name": "CONTROL_NET", "type": "CONTROL_NET", "links": [26], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetLoader"}, "widgets_values": ["depth/control-depth.safetensors"]}, {"id": 22, "type": "ControlNetApply", "pos": [1694.7387444900626, 1140.3270329659492], "size": {"0": 317.4000244140625, "1": 98}, "flags": {}, "order": 34, "mode": 0, "inputs": [{"name": "conditioning", "type": "CONDITIONING", "link": 25, "slot_index": 0}, {"name": "control_net", "type": "CONTROL_NET", "link": 26}, {"name": "image", "type": "IMAGE", "link": 27}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [79], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetApply"}, "widgets_values": [0.85]}, {"id": 56, "type": "DownloadAndLoadDepthAnythingV2Model", "pos": [1695.7387444900626, 1304.3270329659492], "size": {"0": 315, "1": 58}, "flags": {}, "order": 3, "mode": 0, "outputs": [{"name": "da_v2_model", "type": "DAMODEL", "links": [69], "shape": 3}], "properties": {"Node name for S&R": "DownloadAndLoadDepthAnythingV2Model"}, "widgets_values": ["depth_anything_v2_vitb_fp16.safetensors"]}, {"id": 24, "type": "PreviewImage", "pos": [1743.7387444900626, 1542.3270329659495], "size": {"0": 210, "1": 246}, "flags": {}, "order": 35, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 28}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 45, "type": "ControlNetLoader", "pos": [2203.319597841513, 1034.3547591892057], "size": {"0": 315, "1": 58}, "flags": {}, "order": 4, "mode": 0, "outputs": [{"name": "CONTROL_NET", "type": "CONTROL_NET", "links": [58], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetLoader"}, "widgets_values": ["canny/canny_sdxl.safetensors"]}, {"id": 25, "type": "IPAdapterModelLoader", "pos": [992.8990757311713, -308.64242118022656], "size": {"0": 300, "1": 60}, "flags": {}, "order": 5, "mode": 0, "outputs": [{"name": "IPADAPTER", "type": "IPADAPTER", "links": [30], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "IPAdapterModelLoader"}, "widgets_values": ["ip-adapter-faceid-plusv2_sdxl.bin"]}, {"id": 26, "type": "CLIPVisionLoader", "pos": [1034.8990757311717, -188.6424211802271], "size": {"0": 300, "1": 60}, "flags": {}, "order": 6, "mode": 0, "outputs": [{"name": "CLIP_VISION", "type": "CLIP_VISION", "links": [32], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPVisionLoader"}, "widgets_values": ["model.safetensors"]}, {"id": 28, "type": "IPAdapterInsightFaceLoader", "pos": [1042.8990757311717, -70.64242118022851], "size": {"0": 315, "1": 58}, "flags": {}, "order": 7, "mode": 0, "outputs": [{"name": "INSIGHTFACE", "type": "INSIGHTFACE", "links": [33], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "IPAdapterInsightFaceLoader"}, "widgets_values": ["CUDA"]}, {"id": 39, "type": "CLIPTextEncode", "pos": [2032.180255499727, -358.666307926076], "size": {"0": 400, "1": 200}, "flags": {}, "order": 20, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 51, "slot_index": 0}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [47], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["text, watermark,"]}, {"id": 20, "type": "VAEDecode", "pos": [1684.2580637367612, 515.630505719713], "size": {"0": 210, "1": 46}, "flags": {}, "order": 52, "mode": 0, "inputs": [{"name": "samples", "type": "LATENT", "link": 22}, {"name": "vae", "type": "VAE", "link": 23}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [44, 85], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "VAEDecode"}}, {"id": 18, "type": "CLIPTextEncode", "pos": [110, 1213], "size": {"0": 400, "1": 200}, "flags": {}, "order": 19, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 17}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [20, 96], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["text, watermark, underexposed, ugly, jpeg, (worst quality, low quality, lowres, low details, oversaturated, undersaturated, overexposed, grayscale, bw, bad photo, bad art:1.4), (font, username, error, logo, words, letters, digits, autograph, trademark, name:1.2), (blur, blurry, grainy), cropped, out of frame, cut off, jpeg artifacts, out of focus, glitch, duplicate, (amateur:1.3), merging, clipping, mutant, glitch, uncanny, cross eye, broken face, astronaut, helmet, blurry, (jewelry, bad anatomy, Polymastia)"]}, {"id": 36, "type": "PreviewImage", "pos": [2286, -1821], "size": {"0": 819.194580078125, "1": 1282.14892578125}, "flags": {}, "order": 55, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 43, "slot_index": 0}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 69, "type": "UltralyticsDetectorProvider", "pos": [2857, -379], "size": {"0": 315, "1": 78}, "flags": {}, "order": 8, "mode": 0, "outputs": [{"name": "BBOX_DETECTOR", "type": "BBOX_DETECTOR", "links": [87], "shape": 3, "slot_index": 0}, {"name": "SEGM_DETECTOR", "type": "SEGM_DETECTOR", "links": null, "shape": 3}], "properties": {"Node name for S&R": "UltralyticsDetectorProvider"}, "widgets_values": ["bbox/face_yolov8m.pt"]}, {"id": 48, "type": "CannyEdgePreprocessor", "pos": [2198.319597841513, 1266.3547591892057], "size": {"0": 315, "1": 106}, "flags": {}, "order": 43, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 61, "slot_index": 0}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [59, 60], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CannyEdgePreprocessor"}, "widgets_values": [100, 200, 512]}, {"id": 51, "type": "Mix Color By Mask", "pos": [1117.2661676262123, 1281.6565802315608], "size": {"0": 315, "1": 126}, "flags": {}, "order": 41, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 64}, {"name": "mask", "type": "IMAGE", "link": 65}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [61, 66], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "Mix Color By Mask"}, "widgets_values": [255, 255, 255]}, {"id": 75, "type": "Note", "pos": [3371, -413], "size": {"0": 474.94287109375, "1": 543.5535278320312}, "flags": {}, "order": 9, "mode": 0, "properties": {"text": ""}, "widgets_values": ["You must play with having the upscaled connected to the raw model or the ipdadpter, generatly raw model will be better, but it will loose style."], "color": "#432", "bgcolor": "#653"}, {"id": 63, "type": "ConditioningCombine", "pos": [1613, 757], "size": {"0": 342.5999755859375, "1": 46}, "flags": {}, "order": 50, "mode": 0, "inputs": [{"name": "conditioning_1", "type": "CONDITIONING", "link": 79}, {"name": "conditioning_2", "type": "CONDITIONING", "link": 80}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [19, 46], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ConditioningCombine"}}, {"id": 29, "type": "LoadImage", "pos": [145, -296], "size": {"0": 315, "1": 314.0000915527344}, "flags": {}, "order": 10, "mode": 0, "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [31], "shape": 3, "slot_index": 0}, {"name": "MASK", "type": "MASK", "links": null, "shape": 3}], "properties": {"Node name for S&R": "LoadImage"}, "widgets_values": ["ComfyUI_00004_ (1).png", "image"]}, {"id": 27, "type": "IPAdapterFaceID", "pos": [1473, -331], "size": {"0": 317.4000244140625, "1": 322}, "flags": {}, "order": 17, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 29, "slot_index": 0}, {"name": "ipadapter", "type": "IPADAPTER", "link": 30}, {"name": "image", "type": "IMAGE", "link": 31}, {"name": "image_negative", "type": "IMAGE", "link": null}, {"name": "attn_mask", "type": "MASK", "link": null}, {"name": "clip_vision", "type": "CLIP_VISION", "link": 32}, {"name": "insightface", "type": "INSIGHTFACE", "link": 33}], "outputs": [{"name": "MODEL", "type": "MODEL", "links": [18, 102], "shape": 3, "slot_index": 0}, {"name": "face_image", "type": "IMAGE", "links": [109], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "IPAdapterFaceID"}, "widgets_values": [1, 1, "linear", "concat", 0, 1, "V only"]}, {"id": 80, "type": "PreviewImage", "pos": [513, -306], "size": {"0": 210, "1": 246}, "flags": {}, "order": 24, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 109}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 54, "type": "MaskToImage", "pos": [1181, 1185], "size": {"0": 208.18699645996094, "1": 26}, "flags": {}, "order": 37, "mode": 0, "inputs": [{"name": "mask", "type": "MASK", "link": 68}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [65], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "MaskToImage"}}, {"id": 19, "type": "KSampler", "pos": [1366, 221], "size": {"0": 287.2851867675781, "1": 262}, "flags": {}, "order": 51, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 18, "slot_index": 0}, {"name": "positive", "type": "CONDITIONING", "link": 19}, {"name": "negative", "type": "CONDITIONING", "link": 20}, {"name": "latent_image", "type": "LATENT", "link": 21}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [22], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "KSampler"}, "widgets_values": [21847830896812, "fixed", 5, 2, "dpmpp_sde_gpu", "karras", 1]}, {"id": 53, "type": "InvertMask", "pos": [1165.2661676262123, 1024.6565802315608], "size": {"0": 210, "1": 26}, "flags": {}, "order": 32, "mode": 0, "inputs": [{"name": "mask", "type": "MASK", "link": 67}], "outputs": [{"name": "MASK", "type": "MASK", "links": [68, 136], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "InvertMask"}}, {"id": 14, "type": "GroundingDinoSAMSegment (segment anything)", "pos": [645.1821475895688, 1247.4272342885738], "size": {"0": 352.79998779296875, "1": 122}, "flags": {}, "order": 27, "mode": 0, "inputs": [{"name": "sam_model", "type": "SAM_MODEL", "link": 10}, {"name": "grounding_dino_model", "type": "GROUNDING_DINO_MODEL", "link": 11}, {"name": "image", "type": "IMAGE", "link": 153, "slot_index": 2}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [24, 64], "shape": 3, "slot_index": 0}, {"name": "MASK", "type": "MASK", "links": [15, 67, 137], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "GroundingDinoSAMSegment (segment anything)"}, "widgets_values": ["women", 0.3]}, {"id": 93, "type": "ControlNetApply", "pos": [2145.342643734314, 2680.938869678592], "size": {"0": 317.4000244140625, "1": 98}, "flags": {}, "order": 30, "mode": 0, "inputs": [{"name": "conditioning", "type": "CONDITIONING", "link": 134, "slot_index": 0}, {"name": "control_net", "type": "CONTROL_NET", "link": 127}, {"name": "image", "type": "IMAGE", "link": 151, "slot_index": 2}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [132], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetApply"}, "widgets_values": [0.85]}, {"id": 94, "type": "PreviewImage", "pos": [2224.3426437343132, 2984.9388696785923], "size": {"0": 210, "1": 246}, "flags": {}, "order": 29, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 129}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 90, "type": "ControlNetLoader", "pos": [1621.3426437343103, 2560.938869678592], "size": {"0": 315, "1": 58}, "flags": {}, "order": 11, "mode": 0, "outputs": [{"name": "CONTROL_NET", "type": "CONTROL_NET", "links": [124], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetLoader"}, "widgets_values": ["depth/control-depth.safetensors"]}, {"id": 87, "type": "CLIPTextEncode", "pos": [684.3426437343098, 2573.9388696785923], "size": {"0": 400, "1": 200}, "flags": {}, "order": 22, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 120}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [117], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["text, watermark,"]}, {"id": 83, "type": "VAEEncodeForInpaint", "pos": [1222.3426437343105, 2336.9388696785923], "size": {"0": 315, "1": 98}, "flags": {}, "order": 38, "mode": 0, "inputs": [{"name": "pixels", "type": "IMAGE", "link": 152}, {"name": "vae", "type": "VAE", "link": 116}, {"name": "mask", "type": "MASK", "link": 136}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [112], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "VAEEncodeForInpaint"}, "widgets_values": [20]}, {"id": 84, "type": "KSampler", "pos": [1262.3426437343103, 2732.938869678592], "size": {"0": 287.2851867675781, "1": 262}, "flags": {}, "order": 42, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 114, "slot_index": 0}, {"name": "positive", "type": "CONDITIONING", "link": 135}, {"name": "negative", "type": "CONDITIONING", "link": 117}, {"name": "latent_image", "type": "LATENT", "link": 112}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [113], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "KSampler"}, "widgets_values": [21847830896812, "fixed", 5, 2, "dpmpp_sde_gpu", "karras", 1]}, {"id": 99, "type": "MaskToImage", "pos": [1031.3426437343107, 2805.938869678592], "size": {"0": 210, "1": 26}, "flags": {}, "order": 33, "mode": 0, "inputs": [{"name": "mask", "type": "MASK", "link": 137}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [140], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "MaskToImage"}}, {"id": 100, "type": "PreviewImage", "pos": [1031.3426437343107, 2976.9388696785923], "size": {"0": 210, "1": 246}, "flags": {}, "order": 39, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 140}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 67, "type": "PreviewImage", "pos": [1450, -1829], "size": {"0": 819.194580078125, "1": 1282.14892578125}, "flags": {}, "order": 54, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 85, "slot_index": 0}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 101, "type": "PreviewImage", "pos": [614, -1840], "size": {"0": 819.194580078125, "1": 1282.14892578125}, "flags": {}, "order": 48, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 143, "slot_index": 0}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 15, "type": "VAEEncodeForInpaint", "pos": [1027, 199], "size": {"0": 315, "1": 98}, "flags": {}, "order": 49, "mode": 0, "inputs": [{"name": "pixels", "type": "IMAGE", "link": 144}, {"name": "vae", "type": "VAE", "link": 14}, {"name": "mask", "type": "MASK", "link": 15}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [21], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "VAEEncodeForInpaint"}, "widgets_values": [6]}, {"id": 85, "type": "VAEDecode", "pos": [1295.34264373431, 2542.9388696785913], "size": {"0": 210, "1": 46}, "flags": {}, "order": 45, "mode": 0, "inputs": [{"name": "samples", "type": "LATENT", "link": 113}, {"name": "vae", "type": "VAE", "link": 115}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [143, 144], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "VAEDecode"}}, {"id": 86, "type": "CLIPTextEncode", "pos": [680.3426437343098, 2304.9388696785923], "size": {"0": 400, "1": 200}, "flags": {}, "order": 21, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 119}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [133, 134], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["school \n"]}, {"id": 30, "type": "UpscaleModelLoader", "pos": [2057.51010219765, 595.1423819847621], "size": {"0": 315, "1": 58}, "flags": {}, "order": 12, "mode": 0, "outputs": [{"name": "UPSCALE_MODEL", "type": "UPSCALE_MODEL", "links": [49], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "UpscaleModelLoader"}, "widgets_values": ["4xUltrasharp_4xUltrasharpV10.pt"]}, {"id": 37, "type": "UltimateSDUpscale", "pos": [2072, -77], "size": {"0": 315, "1": 614}, "flags": {}, "order": 53, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 44}, {"name": "model", "type": "MODEL", "link": 108, "slot_index": 1}, {"name": "positive", "type": "CONDITIONING", "link": 46}, {"name": "negative", "type": "CONDITIONING", "link": 47}, {"name": "vae", "type": "VAE", "link": 48}, {"name": "upscale_model", "type": "UPSCALE_MODEL", "link": 49}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [43, 101], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "UltimateSDUpscale"}, "widgets_values": [1.5, 1062314217360759, "fixed", 5, 2, "euler", "normal", 0.2, "Linear", 1024, 1024, 8, 32, "None", 1, 64, 8, 16, true, false]}, {"id": 66, "type": "PreviewImage", "pos": [-217, -1861], "size": {"0": 819.194580078125, "1": 1282.14892578125}, "flags": {}, "order": 25, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 147, "slot_index": 0}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 95, "type": "CannyEdgePreprocessor", "pos": [2150, 2816], "size": {"0": 315, "1": 106}, "flags": {}, "order": 26, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 150, "slot_index": 0}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [129, 151], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CannyEdgePreprocessor"}, "widgets_values": [100, 200, 512]}, {"id": 98, "type": "ConditioningCombine", "pos": [1928, 2221], "size": {"0": 342.5999755859375, "1": 46}, "flags": {}, "order": 40, "mode": 0, "inputs": [{"name": "conditioning_1", "type": "CONDITIONING", "link": 131}, {"name": "conditioning_2", "type": "CONDITIONING", "link": 132}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [135], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ConditioningCombine"}}, {"id": 92, "type": "ControlNetLoader", "pos": [2165, 2505], "size": {"0": 315, "1": 58}, "flags": {}, "order": 13, "mode": 0, "outputs": [{"name": "CONTROL_NET", "type": "CONTROL_NET", "links": [127], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetLoader"}, "widgets_values": ["canny/canny_sdxl.safetensors"]}, {"id": 107, "type": "Reroute", "pos": [667, 269], "size": [75, 26], "flags": {}, "order": 23, "mode": 0, "inputs": [{"name": "", "type": "*", "link": 163}], "outputs": [{"name": "", "type": "IMAGE", "links": [147, 150, 152, 153, 154], "slot_index": 0}], "properties": {"showOutputText": false, "horizontal": false}}, {"id": 11, "type": "LoadImage", "pos": [131, 101], "size": {"0": 315, "1": 314.0000915527344}, "flags": {}, "order": 14, "mode": 0, "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [], "shape": 3, "slot_index": 0}, {"name": "MASK", "type": "MASK", "links": null, "shape": 3}], "properties": {"Node name for S&R": "LoadImage"}, "widgets_values": ["anabelle-the-best-of-me-12.jpg", "image"]}, {"id": 16, "type": "CheckpointLoaderSimple", "pos": [131, 776], "size": {"0": 315, "1": 98}, "flags": {}, "order": 15, "mode": 0, "outputs": [{"name": "MODEL", "type": "MODEL", "links": [29, 108, 114], "slot_index": 0}, {"name": "CLIP", "type": "CLIP", "links": [16, 17, 51, 98, 119, 120], "slot_index": 1}, {"name": "VAE", "type": "VAE", "links": [14, 23, 48, 97, 115, 116], "slot_index": 2}], "properties": {"Node name for S&R": "CheckpointLoaderSimple"}, "widgets_values": ["RealVisXL_V4.0_Lightning.safetensors"]}, {"id": 72, "type": "PreviewImage", "pos": [3119, -1817], "size": {"0": 819.194580078125, "1": 1282.14892578125}, "flags": {}, "order": 57, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 100, "slot_index": 0}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 68, "type": "FaceDetailer", "pos": [2862, -258], "size": {"0": 346, "1": 900.0000610351562}, "flags": {}, "order": 56, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 101}, {"name": "model", "type": "MODEL", "link": 102}, {"name": "clip", "type": "CLIP", "link": 98}, {"name": "vae", "type": "VAE", "link": 97}, {"name": "positive", "type": "CONDITIONING", "link": 95}, {"name": "negative", "type": "CONDITIONING", "link": 96}, {"name": "bbox_detector", "type": "BBOX_DETECTOR", "link": 87}, {"name": "sam_model_opt", "type": "SAM_MODEL", "link": null}, {"name": "segm_detector_opt", "type": "SEGM_DETECTOR", "link": null}, {"name": "detailer_hook", "type": "DETAILER_HOOK", "link": null}, {"name": "scheduler_func_opt", "type": "SCHEDULER_FUNC", "link": null}], "outputs": [{"name": "image", "type": "IMAGE", "links": [100, 161], "shape": 3, "slot_index": 0}, {"name": "cropped_refined", "type": "IMAGE", "links": [], "shape": 6, "slot_index": 1}, {"name": "cropped_enhanced_alpha", "type": "IMAGE", "links": null, "shape": 6}, {"name": "mask", "type": "MASK", "links": null, "shape": 3}, {"name": "detailer_pipe", "type": "DETAILER_PIPE", "links": null, "shape": 3}, {"name": "cnet_images", "type": "IMAGE", "links": null, "shape": 6}], "properties": {"Node name for S&R": "FaceDetailer"}, "widgets_values": [384, true, 1024, 1062314217360759, "fixed", 5, 2, "dpmpp_sde_gpu", "karras", 0.3, 5, true, true, 0.5, 10, 3, "center-1", 0, 0.93, 0, 0.7, "False", 10, "", 1, false, 20]}, {"id": 89, "type": "ControlNetApply", "pos": [1679, 2678], "size": {"0": 317.4000244140625, "1": 98}, "flags": {}, "order": 36, "mode": 0, "inputs": [{"name": "conditioning", "type": "CONDITIONING", "link": 133, "slot_index": 0}, {"name": "control_net", "type": "CONTROL_NET", "link": 124}, {"name": "image", "type": "IMAGE", "link": 162}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [131], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetApply"}, "widgets_values": [0.85]}, {"id": 55, "type": "DepthAnything_V2", "pos": [1738.7387444900626, 1425.3270329659492], "size": {"0": 210, "1": 46}, "flags": {}, "order": 28, "mode": 0, "inputs": [{"name": "da_model", "type": "DAMODEL", "link": 69, "slot_index": 0}, {"name": "images", "type": "IMAGE", "link": 154}], "outputs": [{"name": "image", "type": "IMAGE", "links": [27, 28, 162], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "DepthAnything_V2"}}, {"id": 17, "type": "CLIPTextEncode", "pos": [114, 925], "size": {"0": 400, "1": 200}, "flags": {}, "order": 18, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 16}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [25, 57, 95], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["((masterpiece, best quality)), award winning, 4k, 8k, gorgeous women, super model"]}, {"id": 113, "type": "Load Image Batch", "pos": [117, 487], "size": {"0": 315, "1": 222}, "flags": {}, "order": 16, "mode": 0, "outputs": [{"name": "image", "type": "IMAGE", "links": [163], "shape": 3, "slot_index": 0}, {"name": "filename_text", "type": "STRING", "links": null, "shape": 3}], "properties": {"Node name for S&R": "Load Image Batch"}, "widgets_values": ["single_image", 0, "Batch 001", "/home/mclean/Pictures/characters/old/maddy/2/", "*", "false", "true"]}, {"id": 112, "type": "SaveImage", "pos": [3501, 202], "size": {"0": 315, "1": 58}, "flags": {}, "order": 58, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 161}], "properties": {}, "widgets_values": ["ComfyUI"]}], "links": [[10, 12, 0, 14, 0, "SAM_MODEL"], [11, 13, 0, 14, 1, "GROUNDING_DINO_MODEL"], [14, 16, 2, 15, 1, "VAE"], [15, 14, 1, 15, 2, "MASK"], [16, 16, 1, 17, 0, "CLIP"], [17, 16, 1, 18, 0, "CLIP"], [18, 27, 0, 19, 0, "MODEL"], [19, 63, 0, 19, 1, "CONDITIONING"], [20, 18, 0, 19, 2, "CONDITIONING"], [21, 15, 0, 19, 3, "LATENT"], [22, 19, 0, 20, 0, "LATENT"], [23, 16, 2, 20, 1, "VAE"], [24, 14, 0, 21, 0, "IMAGE"], [25, 17, 0, 22, 0, "CONDITIONING"], [26, 23, 0, 22, 1, "CONTROL_NET"], [27, 55, 0, 22, 2, "IMAGE"], [28, 55, 0, 24, 0, "IMAGE"], [29, 16, 0, 27, 0, "MODEL"], [30, 25, 0, 27, 1, "IPADAPTER"], [31, 29, 0, 27, 2, "IMAGE"], [32, 26, 0, 27, 5, "CLIP_VISION"], [33, 28, 0, 27, 6, "INSIGHTFACE"], [43, 37, 0, 36, 0, "IMAGE"], [44, 20, 0, 37, 0, "IMAGE"], [46, 63, 0, 37, 2, "CONDITIONING"], [47, 39, 0, 37, 3, "CONDITIONING"], [48, 16, 2, 37, 4, "VAE"], [49, 30, 0, 37, 5, "UPSCALE_MODEL"], [51, 16, 1, 39, 0, "CLIP"], [57, 17, 0, 46, 0, "CONDITIONING"], [58, 45, 0, 46, 1, "CONTROL_NET"], [59, 48, 0, 46, 2, "IMAGE"], [60, 48, 0, 47, 0, "IMAGE"], [61, 51, 0, 48, 0, "IMAGE"], [64, 14, 0, 51, 0, "IMAGE"], [65, 54, 0, 51, 1, "IMAGE"], [66, 51, 0, 52, 0, "IMAGE"], [67, 14, 1, 53, 0, "MASK"], [68, 53, 0, 54, 0, "MASK"], [69, 56, 0, 55, 0, "DAMODEL"], [79, 22, 0, 63, 0, "CONDITIONING"], [80, 46, 0, 63, 1, "CONDITIONING"], [85, 20, 0, 67, 0, "IMAGE"], [87, 69, 0, 68, 6, "BBOX_DETECTOR"], [95, 17, 0, 68, 4, "CONDITIONING"], [96, 18, 0, 68, 5, "CONDITIONING"], [97, 16, 2, 68, 3, "VAE"], [98, 16, 1, 68, 2, "CLIP"], [100, 68, 0, 72, 0, "IMAGE"], [101, 37, 0, 68, 0, "IMAGE"], [102, 27, 0, 68, 1, "MODEL"], [108, 16, 0, 37, 1, "MODEL"], [109, 27, 1, 80, 0, "IMAGE"], [112, 83, 0, 84, 3, "LATENT"], [113, 84, 0, 85, 0, "LATENT"], [114, 16, 0, 84, 0, "MODEL"], [115, 16, 2, 85, 1, "VAE"], [116, 16, 2, 83, 1, "VAE"], [117, 87, 0, 84, 2, "CONDITIONING"], [119, 16, 1, 86, 0, "CLIP"], [120, 16, 1, 87, 0, "CLIP"], [124, 90, 0, 89, 1, "CONTROL_NET"], [127, 92, 0, 93, 1, "CONTROL_NET"], [129, 95, 0, 94, 0, "IMAGE"], [131, 89, 0, 98, 0, "CONDITIONING"], [132, 93, 0, 98, 1, "CONDITIONING"], [133, 86, 0, 89, 0, "CONDITIONING"], [134, 86, 0, 93, 0, "CONDITIONING"], [135, 98, 0, 84, 1, "CONDITIONING"], [136, 53, 0, 83, 2, "MASK"], [137, 14, 1, 99, 0, "MASK"], [140, 99, 0, 100, 0, "IMAGE"], [143, 85, 0, 101, 0, "IMAGE"], [144, 85, 0, 15, 0, "IMAGE"], [147, 107, 0, 66, 0, "IMAGE"], [150, 107, 0, 95, 0, "IMAGE"], [151, 95, 0, 93, 2, "IMAGE"], [152, 107, 0, 83, 0, "IMAGE"], [153, 107, 0, 14, 2, "IMAGE"], [154, 107, 0, 55, 1, "IMAGE"], [161, 68, 0, 112, 0, "IMAGE"], [162, 55, 0, 89, 2, "IMAGE"], [163, 113, 0, 107, 0, "*"]], "groups": [{"title": "Diffuse", "bounding": [3106, 8, 140, 80], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "Mask", "bounding": [606, 943, 442, 821], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "Fill", "bounding": [1103, 952, 358, 813], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "DepthControlNet", "bounding": [1637, 872, 416, 957], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "CannyControlNet", "bounding": [2126, 885, 440, 951], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "FaceID", "bounding": [974, -441, 892, 476], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "Diffuse", "bounding": [983, 114, 883, 484], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "UpScale", "bounding": [2017, -462, 537, 1144], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "FaceDetailer", "bounding": [2691, -464, 640, 1138], "color": "#3f789e", "font_size": 24, "locked": false}, {"title": "BG-ControlNet", "bounding": [607, 2071, 2034, 1384], "color": "#3f789e", "font_size": 24, "locked": false}], "config": {}, "extra": {"ds": {"scale": 0.7627768444385957, "offset": [-2909.6741565202315, 930.6896269928911]}, "groupNodes": {"Diffuse": {"nodes": [{"type": "IPAdapterFaceID", "pos": [3319, -486], "size": {"0": 317.4000244140625, "1": 322}, "flags": {}, "order": 16, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": null, "slot_index": 0}, {"name": "ipadapter", "type": "IPADAPTER", "link": null}, {"name": "image", "type": "IMAGE", "link": null}, {"name": "image_negative", "type": "IMAGE", "link": null}, {"name": "attn_mask", "type": "MASK", "link": null}, {"name": "clip_vision", "type": "CLIP_VISION", "link": null}, {"name": "insightface", "type": "INSIGHTFACE", "link": null}], "outputs": [{"name": "MODEL", "type": "MODEL", "links": [], "shape": 3, "slot_index": 0}, {"name": "face_image", "type": "IMAGE", "links": [], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "IPAdapterFaceID"}, "widgets_values": [1, 1, "linear", "concat", 0, 1, "V only"], "index": 0}, {"type": "KSampler", "pos": [3574, -81], "size": {"0": 287.2851867675781, "1": 262}, "flags": {}, "order": 30, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": null, "slot_index": 0}, {"name": "positive", "type": "CONDITIONING", "link": null}, {"name": "negative", "type": "CONDITIONING", "link": null}, {"name": "latent_image", "type": "LATENT", "link": null}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "KSampler"}, "widgets_values": [21847830896812, "fixed", 5, 2, "dpmpp_sde_gpu", "karras", 1], "index": 1}, {"type": "VAEDecode", "pos": [3902, 282], "size": {"0": 210, "1": 46}, "flags": {}, "order": 31, "mode": 0, "inputs": [{"name": "samples", "type": "LATENT", "link": null}, {"name": "vae", "type": "VAE", "link": null}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "VAEDecode"}, "index": 2}, {"type": "PreviewImage", "pos": [4229, 277], "size": {"0": 199.779052734375, "1": 272.04937744140625}, "flags": {}, "order": 32, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": null}], "properties": {"Node name for S&R": "PreviewImage"}, "index": 3}], "links": [[null, 0, 0, 0, 16, "MODEL"], [null, 0, 0, 1, 25, "IPADAPTER"], [null, 0, 0, 2, 29, "IMAGE"], [null, 0, 0, 5, 26, "CLIP_VISION"], [null, 0, 0, 6, 28, "INSIGHTFACE"], [0, 0, 1, 0, 27, "MODEL"], [null, 0, 1, 1, 63, "CONDITIONING"], [null, 0, 1, 2, 18, "CONDITIONING"], [null, 0, 1, 3, 15, "LATENT"], [1, 0, 2, 0, 19, "LATENT"], [null, 2, 2, 1, 16, "VAE"], [2, 0, 3, 0, 20, "IMAGE"]], "external": [[2, 0, "IMAGE"]]}, "constants": {"nodes": [{"type": "CheckpointLoaderSimple", "pos": [121, 773], "size": {"0": 315, "1": 98}, "flags": {}, "order": 11, "mode": 0, "outputs": [{"name": "MODEL", "type": "MODEL", "links": [], "slot_index": 0}, {"name": "CLIP", "type": "CLIP", "links": [], "slot_index": 1}, {"name": "VAE", "type": "VAE", "links": [], "slot_index": 2}], "properties": {"Node name for S&R": "CheckpointLoaderSimple"}, "widgets_values": ["RealVisXL_V4.0_Lightning.safetensors"], "index": 0}, {"type": "CLIPTextEncode", "pos": [114, 925], "size": {"0": 400, "1": 200}, "flags": {}, "order": 15, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": null}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["((masterpiece, best quality)), award winning, 4k, 8k, gorgeous women, super model"], "index": 1}, {"type": "CLIPTextEncode", "pos": [110, 1213], "size": {"0": 400, "1": 200}, "flags": {}, "order": 16, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": null}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["text, watermark, underexposed, ugly, jpeg, (worst quality, low quality, lowres, low details, oversaturated, undersaturated, overexposed, grayscale, bw, bad photo, bad art:1.4), (font, username, error, logo, words, letters, digits, autograph, trademark, name:1.2), (blur, blurry, grainy), cropped, out of frame, cut off, jpeg artifacts, out of focus, glitch, duplicate, (amateur:1.3), merging, clipping, mutant, glitch, uncanny, cross eye, broken face, astronaut, helmet, blurry, (jewelry, bad anatomy, Polymastia)"], "index": 2}], "links": [[0, 1, 1, 0, 16, "CLIP"], [0, 1, 2, 0, 16, "CLIP"]], "external": [[0, 0, "MODEL"], [0, 1, "CLIP"], [0, 2, "VAE"], [1, 0, "CONDITIONING"], [2, 0, "CONDITIONING"]]}}}, "version": 0.4}